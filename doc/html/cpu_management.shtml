<!--#include virtual="header.txt"-->

<h1> CPU Management User and Administrator Guide</h1>
<a name="Overview"></a>
<h2>Overview</h2>
<p>The purpose of this guide is to assist SLURM users and administrators in selecting configuration options 
and composing command lines to manage the use of CPU resources by jobs, steps and tasks. The document 
is divided into the following sections:</p>
<UL>
<li><a href="#Overview">Overview</a></li>
<li><a href="#Section1">CPU Management Steps performed by SLURM</a></li>
<li><a href="#Section2">Getting Information about CPU usage by Jobs/Steps/Tasks</a></li>
<li><a href="#Section3">CPU Management and SLURM Accounting</a></li>
<li><a href="#Section4">CPU Management Examples</a></li>
</UL>
<p>CPU Management through user commands is constrained by the configuration parameters
chosen by the SLURM administrator. The interactions between different CPU management options are complex 
and often difficult to predict. Some experimentation may be required to discover the exact combination 
of options  needed to produce a desired outcome. Users and administrators should refer to the man pages 
for <a href="slurm.conf.html">slurm.conf</a>, <a href="salloc.html">salloc</a>, 
<a href="sbatch.html">sbatch</a> and <a href="srun.html">srun</a> for detailed explanations of each 
option. The following html documents may also be useful:</p>
<a href="cons_res.html">Consumable Resources in SLURM</a><BR>
<a href="cons_res_share.html">Sharing Consumable Resources</a><BR>
<a href="mc_support.html">Support for Multi-core/Multi-thread 
Architectures</a><BR>
<a href="dist_plane.html">Plane distribution</a>
<p>The information and examples in this document have been verified on SLURM version 2.2.3. Some
information may not be valid for previous SLURM versions.</p><BR>
<a name="Section1"></a>
<h2>CPU Management Steps performed by SLURM</h2>
<p>SLURM uses three basic steps to manage CPU resources:</p>
<ul>
<li><a href="#Step1">Step 1: Selection and Allocation of Nodes/CPUs to Jobs/Steps</a>
<li><a href="#Step2">Step 2: Distribution of Tasks to Nodes</a>
<li><a href="#Step3">Step 3: Optional Distribution and Binding of Tasks to CPUs within a Node 
(Task Affinity)</a>
</ul>
<a name="Step1"></a>
<h3>Step 1: Selection and Allocation of Nodes/CPUs to Jobs/Steps</h3>
<p>In Step 1, SLURM selects and allocates a set of CPU resources for a job or job step. 
If <FONT FACE="Courier New, monospace">
SelectType=select/linear</FONT> is configured, only whole nodes are allocated. If 
<FONT FACE="Courier New, monospace">SelectType=select/cons_res</FONT> is configured, 
sockets, cores and threads may be allocated as 
<a href="cons_res.html">consumable resources</a> 
from the selected nodes. The consumable resource type is defined by 
<FONT FACE="Courier New, monospace">SelectTypeParameters.</FONT>
<BR>
<p>When using <FONT FACE="Courier New, monospace">SelectType=select/cons_res</FONT>, 
the default allocation method across nodes is block (allocate all available CPUs in 
a node before using another node). The default allocation method within a node is cyclic 
(allocate available CPUs in a round-robin fashion across the sockets within a node). 
Users may override the default behavior using the appropriate command 
line options described below.
<BR><BR>
Step 1 is performed by slurmctld and the select plugin.
<BR>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
                <CAPTION STYLE="font-size: 8pt"><B>slurm.conf options that control Step 1</B></CAPTION>
		<COL WIDTH=20%>
		<COL WIDTH=20%>
		<COL WIDTH=60%>
		<TR>
			<TD WIDTH=20% HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>slurm.conf
				parameter</B></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Possible values</B></FONT></FONT></P>
			</TD>
			<TD WIDTH=60% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Description</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_NodeName">NodeName</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;name of the node><BR><BR>
				Plus additional parameters. See man page for details.</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">Defines
				a node. This includes the number and layout of sockets, cores,
				threads and processors (logical CPUs) on the node.</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_PartitionName">PartitionName</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;name of the partition><BR><BR>
				Plus additional parameters. See man page for details.</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">Defines
				a partition. Several parameters of the partition definition
				affect the allocation of CPU resources to jobs (e.g., Nodes,
				Shared, MaxNodes)</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_FastSchedule">FastSchedule</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt"><FONT FACE="Courier New, monospace">0 | 1 | 2</FONT></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				how the information in a node definition is used.</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_SelectType">SelectType</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
                               <FONT FACE="Courier New, monospace">select/linear | select/cons_res</FONT></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				whether CPU resources are allocated to jobs and job steps in
				units of whole nodes or as consumable resources (sockets, cores
				or threads).</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=17>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_SelectTypeParameters">SelectTypeParameters</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt"><FONT FACE="Courier New, monospace">CR_CPU | CR_CPU_Memory | CR_Core |
CR_Core_Memory | CR_Socket | CR_Socket_Memory</FONT><BR><BR>Plus additional options.  See man page for details.</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">Defines
				the consumable resource type and controls other aspects of CPU
				resource allocation by the select plugin.</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER> 
<BR>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0
           STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
                <CAPTION STYLE="font-size: 8pt"><B>srun/salloc/sbatch command line options that control Step 1</B></CAPTION>
		<COL WIDTH=20%>
		<COL WIDTH=20%>
		<COL WIDTH=60%>
		<TR>
			<TD WIDTH=20% HEIGHT=17 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Command
				line option</B></FONT></P>
			</TD>
			<TD WIDTH=20% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Possible values</B></FONT></P>
			<TD WIDTH=60% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Description</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_extra-node-info">-B, --extra-node-info</a>
				</FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				&lt;sockets[:cores[:threads]]></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">Restricts
				node selection to nodes with a specified layout of sockets, cores
				and threads.</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_constraint">-C, --constraint</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;list>
				</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Restricts
				node selection to nodes with specified attributes</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_contiguous">--contiguous</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">N/A</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Restricts
				node selection to contiguous nodes</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_cores-per-socket">--cores-per-socket</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;cores></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the number of cores allocated per socket</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_cpus-per-task">-c, --cpus-per-task</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;ncpus></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the number of CPUs allocated per task</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_exclusive">--exclusive</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">N/A</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Prevents
				sharing of allocated nodes with other jobs</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="salloc.html#OPT_nodefile">-F, --nodefile</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;node file></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">File
				containing a list of specific nodes to be selected for the job (salloc and sbatch only)</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_hint">--hint</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">compute_bound |
                                memory_bound | [no]multithread</FONT></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Additional
				controls on allocation of CPU resources</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_mincpus">--mincpus</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;n></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the minimum number of CPUs allocated per node</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_nodes">-N, --nodes</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				&lt;minnodes[-maxnodes]></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the minimum/maximum number of nodes allocated to the job</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks">-n, --ntasks</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the number of tasks to be created for the job</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks-per-core">--ntasks-per-core</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the maximum number of tasks per allocated core</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks-per-socket">--ntasks-per-socket</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the maximum number of tasks per allocated socket</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks-per-node">--ntasks-per-node</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the maximum number of tasks per allocated node</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_overcommit">-O, --overcommit</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">N/A</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Allows
				fewer CPUs to be allocated than the number of tasks</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_partition">-p, --partition</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				&lt;partition_names></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				which partition is used for the job</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_share">-s, --share</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">N/A</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Allows
				sharing of allocated nodes with other jobs</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_sockets-per-node">--sockets-per-node</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;sockets></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the number of sockets  allocated per node</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_threads-per-core">--threads-per-core</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;threads></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				the number of threads allocated per core</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_nodelist">-w, --nodelist</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				&lt;host1,host2,... or filename></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">List
				of specific nodes to be allocated to the job</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_exclude">-x, --exclude</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
                                &lt;host1,host2,... or filename></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">List
				of specific nodes to be excluded from allocation to the job</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=17>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_no-allocate">-Z, --no-allocate</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">N/A</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Bypass
				normal allocation (privileged option available to users
				&ldquo;SlurmUser&rdquo; and &ldquo;root&rdquo; only)</FONT></FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Step2"></a>
<h3>Step 2: Distribution of Tasks to Nodes</h3>
<p>In Step 2, SLURM distributes tasks to the nodes that were selected for 
the job/step in Step 1. Each task is distributed to only one node, but more than one 
task may be distributed to each node.  Unless overcommitment of CPUs to tasks is
specified for the job, the number of tasks distributed to a node is
constrained by the number of CPUs allocated on the node and the number of CPUs per
task. If consumable resources is configured, or resource sharing is allowed, tasks from 
more than one job/step may be distributed to the same node concurrently.  
<BR><BR>
Step 2 is performed by slurmctld.
<BR>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
                <CAPTION STYLE="font-size: 8pt"><B>slurm.conf options that control Step 2</B></CAPTION>
		<COL WIDTH=20%>
		<COL WIDTH=20%>
		<COL WIDTH=60%>
		<TR>
			<TD WIDTH=20% HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>slurm.conf
				parameter</B></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Possible values</B></FONT></FONT></P>
			</TD>
			<TD WIDTH=60% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Description</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_MaxTasksPerNode">MaxTasksPerNode</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				Controls the maximum number of tasks that a job step can spawn on a single node
				</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0
           STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
                <CAPTION STYLE="font-size: 8pt"><B>srun/salloc/sbatch command line options that control Step 2</B></CAPTION>
		<COL WIDTH=20%>
		<COL WIDTH=20%>
		<COL WIDTH=60%>
		<TR>
			<TD WIDTH=20% HEIGHT=17 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Command
				line option</B></FONT></P>
			</TD>
			<TD WIDTH=20% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Possible values</B></FONT></P>
			<TD WIDTH=60% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Description</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_distribution">--distribution, -m</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt"><FONT FACE="Courier New, monospace">
				block|cyclic<BR>|arbitrary|plane=&lt;options>[:block|cyclic]</FONT></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">The first specified distribution (before the ":")
				controls the sequence in which tasks are distributed to each of the selected nodes. Note that 
				this option does not affect the number of tasks distributed to each node, but only the sequence of 
				distribution.</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks-per-core">--ntasks-per-core</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number>
				</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">
				Controls the maximum number of tasks per allocated core</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks-per-socket">--ntasks-per-socket</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">
				Controls the maximum number of tasks per allocated socket</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks-per-node">--ntasks-per-node</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">
				Controls the maximum number of tasks per allocated node</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_relative">-r, --relative</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">N/A</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">Controls
				which node is used for a job step</FONT></FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Step3"></a>
<h3>Step 3: Optional Distribution and Binding of Tasks to CPUs within a Node (Task Affinity)</h3>
<p>In optional Step 3, SLURM distributes and binds each task to a specified subset of 
the allocated CPUs on the node to which the task was distributed in Step 2. Different 
tasks distributed to the same node may be bound to the same subset of CPUs or to 
different subsets. This step is known as task affinity or task/CPU binding.
<BR><BR>
Step 3 is performed by slurmd and the task plugin.
<BR>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
                <CAPTION STYLE="font-size: 8pt"><B>slurm.conf options that control Step 3</B></CAPTION>
		<COL WIDTH=20%>
		<COL WIDTH=20%>
		<COL WIDTH=60%>
		<TR>
			<TD WIDTH=20% HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>slurm.conf
				parameter</B></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Possible values</B></FONT></FONT></P>
			</TD>
			<TD WIDTH=60% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Description</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_TaskPlugin">TaskPlugin</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt"><FONT FACE="Courier New, monospace">
				task/none | task/affinity</FONT></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				Controls whether this step is enabled
				</FONT></P>
			</TD>
		</TR>
				<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="slurm.conf.html#OPT_TaskPluginParam">TaskPluginParam</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">See man page</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				Controls the binding unit (sockets, cores or threads) and the binding method (sched or cpusets)
				</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0
           STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
                <CAPTION STYLE="font-size: 8pt"><B>srun/salloc/sbatch command line options that control Step 3</B></CAPTION>
		<COL WIDTH=20%>
		<COL WIDTH=20%>
		<COL WIDTH=60%>
		<TR>
			<TD WIDTH=20% HEIGHT=17 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Command
				line option</B></FONT></P>
			</TD>
			<TD WIDTH=20% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Possible values</B></FONT></P>
			<TD WIDTH=60% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
                    <B style="font-family: Arial, Helvetica, sans-serif">Description</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_cpu_bind">--cpu_bind</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
				See man page</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">Controls binding of tasks to CPUs</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_ntasks-per-core">--ntasks-per-core</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">&lt;number>
				</FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">
				Controls the maximum number of tasks per allocated core</FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=20% HEIGHT=18>
				<P ALIGN=LEFT><FONT FACE="Courier New, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">
				<a href="srun.html#OPT_distribution">--distribution, -m</a></FONT></FONT></P>
			</TD>
			<TD WIDTH=20%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt"><FONT FACE="Courier New, monospace">
				block|cyclic<BR>|arbitrary|plane=&lt;options>[:block|cyclic]</FONT></FONT></P>
			</TD>
			<TD WIDTH=60%>
				<P ALIGN=LEFT><FONT FACE="Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">
				The second specified distribution (after the ":") controls the sequence in which tasks are 
				distributed to allocated CPUs within a node for binding of tasks to CPUs</FONT></FONT></P>
			</TD>
		</TR>

	</TABLE>
</CENTER>
<BR><BR>
<h2>Additional Notes on CPU Management Steps</h2>
<p>For consumable resources, it is important for users to understand the difference between 
allocation (Step 1) and task affinity/binding (Step 3).  Exclusive (unshared) allocation 
of CPUs as consumable resources limits the number of jobs/steps/tasks that 
can use a node concurrently.  But it does not limit the set of CPUs on the node that each 
task distributed to the node can use.  Unless task affinity is enabled, or some other form 
of binding is used (e.g., a spank plugin), all tasks distributed to a node can use all of 
the CPUs on the node, including CPUs not allocated to their job/step.  This may have 
unexpected adverse effects on performance, since it allows one job to use CPUs allocated 
exclusively to another job.  For this reason, it may not be advisable to configure 
consumable resources without also configuring task affinity.  Note that task affinity 
can also be useful when select/linear (whole node allocation) is configured, to improve 
performance by restricting each task to a particular socket or other subset of CPU 
resources on a node.</p>
<BR><BR>
<a name="Section2"></a>
<h2>Getting Information about CPU usage by Jobs/Steps/Tasks</h2>
<p>There is no easy way to generate a comprehensive set of CPU management information 
for a job/step (allocation, distribution and binding). However, several 
commands/options provide limited information about CPU usage.
</p>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=3 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<TR>
			<TD WIDTH=30% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Command/Option</B></FONT></P>
			</TD>
			<TD WIDTH=70% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Information</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=30%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
scontrol show job option: 
<FONT FACE="Courier New, monospace">--details</FONT></FONT></P>
			</TD>
			<TD WIDTH=70%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
This option provides a list of the nodes selected for the job and the CPU ids allocated to the job on each 
node. Note that the CPU ids reported by this command are SLURM abstract CPU ids, not Linux/hardware CPU ids 
(as reported by, for example, /proc/cpuinfo).
</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=30%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
Linux command: <FONT FACE="Courier New, monospace">env</FONT></FONT></P>
			</TD>
			<TD WIDTH=70%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
Many SLURM environment variables provide information related to node and CPU usage:
<BR><BR>
<FONT FACE="Courier New, monospace">
SLURM_JOB_CPUS_PER_NODE<BR>
SLURM_CPUS_PER_TASK<BR>
SLURM_CPU_BIND<BR>
SLURM_DISTRIBUTION<BR>
SLURM_NODELIST<BR>
SLURM_TASKS_PER_NODE<BR>
SLURM_STEP_NODELIST<BR>
SLURM_STEP_NUM_NODES<BR>
SLURM_STEP_NUM_TASKS<BR>
SLURM_STEP_TASKS_PER_NODE<BR>
SLURM_NNODES<BR>
SLURM_NTASKS<BR>
SLURM_NPROCS<BR>
SLURM_CPUS_ON_NODE<BR>
SLURM_NODEID<BR>
SLURMD_NODENAME<BR>
</FONT>
</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=30%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
srun/salloc/sbatch option: 
<FONT FACE="Courier New, monospace">--cpu_bind=verbose</FONT></FONT></P>
			</TD>
			<TD WIDTH=70%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
This option provides a list of the CPU masks used by task affinity to bind tasks to CPUs. 
Note that the CPU ids represented by these masks are Linux/hardware CPU ids, not SLURM 
abstract CPU ids as reported by scontrol, etc.
</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=30%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
srun/salloc/sbatch option: 
<FONT FACE="Courier New, monospace">-l</FONT></FONT></P>
			</TD>
			<TD WIDTH=70%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
This option adds the task id as a prefix to each line of output from a task sent to stdout/stderr. 
This can be useful for distinguishing node-related and CPU-related information by task id 
for multi-task jobs/steps.
</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=30%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
Linux command:<BR> 
<FONT FACE="Courier New, monospace">cat /proc/&lt;pid&gt;/status | grep Cpus_allowed_list</FONT></FONT></P>
			</TD>
			<TD WIDTH=70%>
				<P ALIGN=LEFT><FONT SIZE=1 STYLE="font-size: 8pt">
Given a task's pid (or "self" if the command is executed by the task itself), this command 
produces a list of the CPU ids bound to the task. This is the same information that is 
provided by <FONT FACE="Courier New, monospace">--cpu_bind=verbose</FONT>, but in a more readable format.
</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR><BR>
<a name="Section3"></a>
<h2>CPU Management and SLURM Accounting</h2>
<p>CPU management by SLURM users is subject to limits imposed by SLURM Accounting. Accounting limits may be applied on CPU
usage at the level of users, groups and clusters. For details, see the sacctmgr man page.</p>
<BR>
<a name="Section4"></a>
<h2>CPU Management Examples</h2>
<p>The following examples illustrate some scenarios for managing CPU
resources using SLURM. Many additional scenarios are possible. In
each example, it is assumed that all CPUs on each node are available
for allocation.</p> 
<ul>
<li><a href="#Example">Example Node and Partition Configuration</a><BR>
<li><a href="#Example1">Example 1: Allocation of whole nodes</a><BR>
<li><a href="#Example2">Example 2: Simple allocation of cores as consumable resources</a>
<li><a href="#Example3">Example 3: Consumable resources with balanced allocation across nodes</a>
<li><a href="#Example4">Example 4: Consumable resources with minimization of resource fragmentation</a>
<li><a href="#Example5">Example 5: Consumable resources with cyclic distribution of tasks to nodes</a>
<li><a href="#Example6">Example 6: Consumable resources with default allocation and plane distribution of tasks to nodes</a>
<li><a href="#Example7">Example 7: Consumable resources with overcommitment of CPUs to tasks</a>
<li><a href="#Example8">Example 8: Consumable resources with resource sharing between jobs</a>
<li><a href="#Example9">Example 9: Consumable resources on multithreaded node, allocating only one thread per core</a>
<li><a href="#Example10">Example 10: Consumable resources with task affinity and core binding</a>
<li><a href="#Example11">Example 11: Consumable resources with task affinity and socket binding, Case 1</a>
<li><a href="#Example12">Example 12: Consumable resources with task affinity and socket binding, Case 2</a>
<li><a href="#Example13">Example 13: Consumable resources with task affinity and socket binding, Case 3</a>
<li><a href="#Example14">Example 14: Consumable resources with task affinity and customized allocation and distribution</a>
<li><a href="#Example15">Example 15: Consumable resources with task affinity to optimize the performance of a multi-task, 
multi-thread job</a>
</ul><BR>
<a name="Example"></a>
<h3>Example Node and Partition Configuration</h3>
<p>For these examples, the SLURM cluster contains the following nodes:</p>
<CENTER>
	<TABLE WIDTH=402 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=262>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=19>
		<TR>
			<TD WIDTH=262 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n3</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=262 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">Number
				of Sockets</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=262 HEIGHT=25 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt">Number
				of Cores per Socket</FONT></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=262 HEIGHT=25 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt">Total
				Number of Cores</FONT></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=262 HEIGHT=25 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt">Number
				of Threads (CPUs) per Core</FONT></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=262 HEIGHT=24 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt">Total
				Number of CPUs</FONT></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">16</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<p>And the following partitions:</p>
<CENTER>
	<TABLE WIDTH=301 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=109>
		<COL WIDTH=72>
		<COL WIDTH=82>
		<TR>
			<TD WIDTH=109 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>PartitionName</B></FONT></P>
			</TD>
			<TD WIDTH=72 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>regnodes</B></FONT></P>
			</TD>
			<TD WIDTH=82 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>hypernode</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=109 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">Nodes</FONT></P>
			</TD>
			<TD WIDTH=72 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">n0
				 n1  n2</FONT></P>
			</TD>
			<TD WIDTH=82 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">n3</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=109 HEIGHT=24 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt">Default</FONT></FONT></P>
			</TD>
			<TD WIDTH=72 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">YES</FONT></P>
			</TD>
			<TD WIDTH=82 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<p>These entities are defined in slurm.conf as follows:</p>
<PRE>
Nodename=n0 NodeAddr=node0 Sockets=2 CoresPerSocket=4 ThreadsPerCore=1 Procs=8
Nodename=n1 NodeAddr=node1 Sockets=2 CoresPerSocket=4 ThreadsPerCore=1 Procs=8 State=IDLE
Nodename=n2 NodeAddr=node2 Sockets=2 CoresPerSocket=4 ThreadsPerCore=1 Procs=8 State=IDLE
Nodename=n3 NodeAddr=node3 Sockets=2 CoresPerSocket=4 ThreadsPerCore=2 Procs=16 State=IDLE
PartitionName=regnodes Nodes=n0,n1,n2 Shared=YES Default=YES State=UP 
PartitionName=hypernode Nodes=n3 State=UP
</PRE>
<BR>
<a name="Example1"></a>
<h3>Example 1: Allocation of whole nodes</h3>
<p>Allocate a minimum of two whole nodes to a job.</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/linear
</PRE>
<p>Command line:</p>
<PRE>
srun -N2 ...
</PRE>
<p>Comments:</p>
The <FONT FACE="Courier New, monospace">SelectType=select/linear</FONT>
configuration option specifies allocation in units of whole nodes.
The<FONT FACE="Courier New, monospace"> -N2</FONT> srun option causes
SLURM to allocate at least 2 nodes to the job.</p>
<BR>
<a name="Example2"></a>
<h3>Example 2: Simple allocation of cores as consumable resources</h3>
<p>A job requires 6 CPUs (2 tasks and 3 CPUs per task with no overcommitment). Allocate the 6 CPUs as consumable resources 
from a single node in the default partition.</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
</PRE>
<p>Command line:</p>
<PRE>
srun -N1-1 -n2 -c3 ...
</PRE>
<p>Comments:</p>
<p>The <FONT FACE="Courier New, monospace">SelectType</FONT> configuration options define cores as consumable resources. 
The <FONT FACE="Courier New, monospace">-N1-1</FONT> srun option
 restricts the job to a single node. The following table shows a possible pattern of allocation
  for this job.
</p>
<CENTER>
	<TABLE WIDTH=312 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=204>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=19>
		<TR>
			<TD WIDTH=204 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=204 HEIGHT=25 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number
				of Allocated CPUs</B></FONT></FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=204 HEIGHT=24 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number
				of Tasks</B></FONT></FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example3"></a>
<h3>Example 3: Consumable resources with balanced allocation across nodes</h3>
<p>A job requires 9 CPUs (3 tasks and 3 CPUs per task with no overcommitment). 
Allocate 3 CPUs from each of the 3 nodes in the default partition.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
</PRE>
<p>Command line:</p>
<PRE>
srun -N3-3 -n3 -c3 ...
</PRE>
<p>Comments:</p>
<p>The options specify the following conditions for the job: 3 tasks, 3 unique CPUs
 per task, using exactly 3 nodes. To satisfy these conditions, SLURM must
  allocate 3 CPUs from each node. The following table shows the allocation
   for this job.
</p>
<CENTER>
	<TABLE WIDTH=312 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=204>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=19>
		<TR>
			<TD WIDTH=204 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=204 HEIGHT=25 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number
				of Allocated CPUs</B></FONT></FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=204 HEIGHT=24 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number
				of Tasks</B></FONT></FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example4"></a>
<h3>Example 4: Consumable resources with minimization of resource fragmentation</h3>
<p>A job requires 12 CPUs (12 tasks and 1 CPU per task with no overcommitment). Allocate 
CPUs using the minimum number of nodes and the minimum number of sockets required for 
the job in order to minimize fragmentation of allocated/unallocated CPUs in the cluster.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core,CR_CORE_DEFAULT_DIST_BLOCK
</PRE>
<p>Command line:</p>
<PRE>
srun -n12 ...
</PRE>
<p>Comments:</p>
<p>The default allocation method across nodes is block. This minimizes the number of nodes
 used for the job. The configuration option <FONT FACE="Courier New, monospace"> 
 CR_CORE_DEFAULT_DIST_BLOCK</FONT> sets the default allocation method within a 
 node to block. This minimizes the number of sockets used for the job within a node. 
 The combination of these two methods causes SLURM to allocate the 12 CPUs using the 
 minimum required number of nodes (2 nodes) and sockets (3 sockets).The following 
 table shows a possible pattern of allocation for this job.
</p>
<CENTER>
	<TABLE WIDTH=349 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=204>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=9>
		<TR>
			<TD WIDTH=204 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=32 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=32 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=31 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=204 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=9 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=204 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=9>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=204 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Tasks</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=32>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=32>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=31>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example5"></a>
<h3>Example 5: Consumable resources with cyclic distribution of tasks to nodes</h3>
<p>A job requires 12 CPUs (6 tasks and 2 CPUs per task with no overcommitment). Allocate 
6 CPUs from each of 2 nodes in the default partition. Distribute tasks to nodes cyclically.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
</PRE>
<p>Command line:</p>
<PRE>
srun -N2-2 --ntasks-per-node=3 --distribution=cyclic -n6 -c2 ...
</PRE>
<p>Comments:</p>
<p>The options specify the following conditions for the job: 6 tasks, 2 unique CPUs per task, 
using exactly 2 nodes, and with 3 tasks per node. To satisfy these conditions, SLURM 
must allocate 6 CPUs from each of 2 nodes. The <FONT FACE="Courier New, monospace">
--distribution=cyclic</FONT> option causes the tasks to be distributed to the nodes in a 
round-robin fashion. The following table shows a possible pattern of allocation and 
distribution for this job.
</p>
<CENTER>
	<TABLE WIDTH=418 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=310>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=19>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Tasks</B></FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Distribution
				of Tasks to Nodes, by Task id</B></FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
				0<BR>2<BR>4</FONT></P></TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">
				1<BR>3<BR>5</FONT></P></TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example6"></a>
<h3>Example 6: Consumable resources with default allocation and plane distribution of tasks to nodes</h3>
<p>A job requires 16 CPUs (8 tasks and 2 CPUs per task with no overcommitment). 
Use all 3 nodes in the default partition. Distribute tasks to each node in blocks of two in a round-robin fashion.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
</PRE>
<p>Command line:</p>
<PRE>
srun -N3-3 --distribution=plane=2 -n8 -c2 ...
</PRE>
<p>Comments:</p>
<p>The options specify the following conditions for the job: 8 tasks, 2 unique CPUs 
per task, using all 3 nodes in the partition. To satisfy these conditions using 
the default allocation method across nodes (block), SLURM allocates 8 CPUs from 
the first node, 6 CPUs from the second node and 2 CPUs from the third node. 
The <FONT FACE="Courier New, monospace">--distribution=plane=2</FONT> option causes SLURM 
to distribute tasks in blocks of two to each of the nodes in a round-robin fashion,
subject to the number of CPUs allocated on each node.  So, for example, only 1 task
is distributed to the third node because only 2 CPUs were allocated on that node and
each task requires 2 CPUs. The following table shows a possible pattern of allocation 
and distribution for this job.
</p>
<CENTER>
	<TABLE WIDTH=434 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=310>
		<COL WIDTH=28>
		<COL WIDTH=28>
		<COL WIDTH=19>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD WIDTH=28 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD WIDTH=28 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=28>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=28>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Tasks</B></FONT></P>
			</TD>
			<TD WIDTH=28>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=28>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Distribution
				of Tasks to Nodes, by Task id</B></FONT></P>
			</TD>
			<TD WIDTH=28>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0
				 1<BR>5 6</FONT></P>
			</TD>
			<TD WIDTH=28>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2
				 3<BR>7</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4<BR> 
				</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example7"></a>
<h3>Example 7: Consumable resources with overcommitment of CPUs to tasks</h3>
<p>A job has 20 tasks. Run the job in a single node.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
</PRE>
<p>Command line:</p>
<PRE>
srun -N1-1 -n20 -O ...
</PRE>
<p>Comments:</p>
The 
<FONT FACE="Courier New, monospace">-O</FONT> option allows the job to 
run in only one node by overcommitting CPUs to tasks.The following table shows
 a possible pattern of allocation and distribution for this job.
</p>

<CENTER>
	<TABLE WIDTH=440 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=310>
		<COL WIDTH=42>
		<COL WIDTH=20>
		<COL WIDTH=19>
		<TR>
			<TD WIDTH=310 HEIGHT=17 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD WIDTH=42 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=42>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 HEIGHT=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Tasks</B></FONT></P>
			</TD>
			<TD WIDTH=42>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">20</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=310 HEIGHT=17 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Distribution
				of Tasks to Nodes, by Task id</B></FONT></P>
			</TD>
			<TD WIDTH=42>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0
				- 19</FONT></P>
			</TD>
			<TD WIDTH=20>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD WIDTH=19>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example8"></a>
<h3>Example 8: Consumable resources with resource sharing between jobs</h3>
<p>2 jobs each require 6 CPUs (6 tasks per job with no overcommitment). 
Run both jobs simultaneously in a single node.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
</PRE>
<p>Command line:</p>
<PRE>
srun -N1-1 -w n0 -n6 -s ...
srun -N1-1 -w n0 -n6 -s ...
</PRE>
<p>Comments:</p>
<p>The <FONT FACE="Courier New, monospace">-N1-1</FONT> and <FONT FACE="Courier New, monospace">-w n0</FONT> 
srun options together restrict both jobs to node n0. The 
<FONT FACE="Courier New, monospace">Shared=YES</FONT> option in the partition definition plus 
the <FONT FACE="Courier New, monospace">-s</FONT> srun option allows the two 
jobs to share CPUs on the node.
</p><BR>
<a name="Example9"></a>
<h3>Example 9: Consumable resources on multithreaded node, allocating only one thread per core</h3>
<p>A job requires 8 CPUs (8 tasks with no overcommitment). Run the job on node n3, 
allocating only one thread per core.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_CPU
</PRE>
<p>Command line:</p>
<PRE>
srun -p hypernode -n8 --hint=nomultithread ...
</PRE>
<p>Comments:</p>
<p>The <FONT FACE="Courier New, monospace">CR_CPU</FONT> configuration 
option enables the allocation of only one thread per core. 
The <FONT FACE="Courier New, monospace">--hint=nomultithread</FONT> 
srun option causes SLURM to allocate only one thread from each core to 
this job. The following table shows a possible pattern of allocation 
for this job.
</p>
 <CENTER>
	<TABLE WIDTH=591 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=3 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=210>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=16>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=20>
		<COL WIDTH=19>
		<TR>
			<TD WIDTH=210 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=16 WIDTH=367 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n3</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=210 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=170 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=191 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=210 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Core id</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=38 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=38 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=38 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=38 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=38 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=45 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=45 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=44 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=210 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>CPU id</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>8</B></FONT></P>
			</TD>
			<TD WIDTH=16 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>9</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>10</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>11</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>12</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>13</B></FONT></P>
			</TD>
			<TD WIDTH=20 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>14</B></FONT></P>
			</TD>
			<TD WIDTH=19 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>15</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=210 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=170>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=191>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=210 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Allocated
				CPU ids</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=170>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0
				  2   4   6</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=191>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8
				 10  12  14</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example10">
<h3>Example 10: Consumable resources with task affinity and core binding</h3>
<p>A job requires 6 CPUs (6 tasks with no overcommitment). Run the job in a 
single node in the default partition. Apply core binding to each task.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
TaskPlugin=task/affinity
TaskPluginParam=sched
</PRE>
<p>Command line:</p>
<PRE>
srun -N1-1 -n6 --cpu_bind=cores ...
</PRE>
<p>Comments:</p>
<p>Using the default allocation method within nodes (cyclic), SLURM allocates 
3 CPUs on each socket of 1 node. Using the default distribution method 
within nodes (cyclic), SLURM distributes and binds each task to an allocated 
core in a round-robin fashion across the sockets. The following table shows 
a possible pattern of allocation, distribution and binding for this job. 
For example, task id 2 is bound to CPU id 1.
<p>
<CENTER>
	<TABLE WIDTH=443 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=196>
		<COL WIDTH=47>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=9>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=163 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=76 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=76>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Allocated
				CPU ids</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=76>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4 5 6</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD ROWSPAN=2 WIDTH=196 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Binding of
				Tasks to CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=47 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>CPU id</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=9 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=47 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Task id</B></FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">5</FONT></P>
			</TD>
			<TD WIDTH=9>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example11"></a>
<h3>Example 11: Consumable resources with task affinity and socket binding, Case 1</h3>
<p>A job requires 6 CPUs (6 tasks with no overcommitment). Run the job in 
a single node in the default partition. Apply socket binding to each task.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
TaskPlugin=task/affinity
TaskPluginParam=sched
</PRE>
<p>Command line:</p>
<PRE>
srun -N1-1 -n6 --cpu_bind=sockets ...
</PRE>
<p>Comments:</p>
<p>Using the default allocation method within nodes (cyclic), SLURM allocates 3 
CPUs on each socket of 1 node. Using the default distribution method within nodes 
(cyclic), SLURM distributes and binds each task to all of the allocated CPUs in 
one socket in a round-robin fashion across the sockets. The following table shows 
a possible pattern of allocation, distribution and binding for this job. For 
example, task ids 1, 3 and 5 are all bound to CPU ids 4, 5 and 6.
</p>
<CENTER>
	<TABLE WIDTH=443 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=196>
		<COL WIDTH=47>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=9>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=163 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=76 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=76>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Allocated
				CPU ids</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=76>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4 5 6</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD ROWSPAN=2 WIDTH=196 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Binding of
				Tasks to CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=47 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>CPU id</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=10 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=9 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=47 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Task ids</B></FONT></P>
			</TD>
			<TD COLSPAN=3 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0
				 2  4</FONT></P>
			</TD>
			<TD WIDTH=10>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD COLSPAN=3 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1
				 3  5</FONT></P>
			</TD>
			<TD WIDTH=9>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example12"></a>
<h3>Example 12: Consumable resources with task affinity and socket binding, Case 2</h3>
<p>A job requires 6 CPUs (2 tasks with 3 cpus per task and no overcommitment). Run the job in 
a single node in the default partition. Allocate cores using the block allocation method.
Distribute cores using the block distribution method. Apply socket binding to each task.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core,CR_CORE_DEFAULT_DIST_BLOCK
TaskPlugin=task/affinity
TaskPluginParam=sched
</PRE>
<p>Command line:</p>
<PRE>
srun -N1-1 -n2 -c3 --cpu_bind=sockets --distribution=block:block ...
</PRE>
<p>Comments:</p>
<p>Using the block allocation method, SLURM allocates 4 
CPUs on one socket and 2 CPUs on the other socket of one node. Using the block distribution method within  
nodes, SLURM distributes 3 CPUs to each task.  Applying socket binding, SLURM binds each task to all
allocated CPUs in all sockets in which the task has a distributed CPU. The following table shows 
a possible pattern of allocation, distribution and binding for this job. In this example, using the
block allocation method CPU ids 0-3 are allocated on socket id 0 and CPU ids 4-5 are allocated on 
socket id 1.  Using the block distribution method, CPU ids 0-2 were distributed to task id 0, and CPU ids 
3-5 were distributed to task id 1.  Applying socket binding, task id 0 is therefore bound to the allocated 
CPUs on socket 0, and task id 1 is bound to the allocated CPUs on both sockets.
</p>
<CENTER>
	<TABLE WIDTH=404 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=196>
		<COL WIDTH=47>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=9>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=150 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Allocated
				CPU ids</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2 3</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4 5</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD ROWSPAN=2 WIDTH=196 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Binding of
				Tasks to CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=54 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>CPU id</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=54 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Task ids</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1</FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example13"></a>
<h3>Example 13: Consumable resources with task affinity and socket binding, Case 3</h3>
<p>A job requires 6 CPUs (2 tasks with 3 cpus per task and no overcommitment). Run the job in 
a single node in the default partition. Allocate cores using the block allocation method.
Distribute cores using the cyclic distribution method. Apply socket binding to each task.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core,CR_CORE_DEFAULT_DIST_BLOCK
TaskPlugin=task/affinity
TaskPluginParam=sched
</PRE>
<p>Command line:</p>
<PRE>
srun -N1-1 -n2 -c3 --cpu_bind=sockets --distribution=block:cyclic ...
</PRE>
<p>Comments:</p>
<p>Using the block allocation method, SLURM allocates 4 
CPUs on one socket and 2 CPUs on the other socket of one node. Using the cyclic distribution method within  
nodes, SLURM distributes 3 CPUs to each task.  Applying socket binding, SLURM binds each task to all
allocated CPUs in all sockets in which the task has a distributed CPU. The following table shows 
a possible pattern of allocation, distribution and binding for this job. In this example, using the
block allocation method CPU ids 0-3 are allocated on socket id 0 and CPU ids 4-5 are allocated on 
socket id 1.  Using the cyclic distribution method, CPU ids 0, 1 and 4 were distributed to task id 0, and CPU ids 
2, 3 and 5 were distributed to task id 1.  Applying socket binding, both tasks are therefore bound to the 
allocated CPUs on both sockets.
</p>
<CENTER>
	<TABLE WIDTH=404 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=6 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<COL WIDTH=196>
		<COL WIDTH=47>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<COL WIDTH=10>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=150 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=254 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Allocated
				CPU ids</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2 3</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=75>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4 5</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD ROWSPAN=2 WIDTH=196 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Binding of
				Tasks to CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=58 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>CPU id</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=18 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=58 BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Task ids</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1</FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1</FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=54>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example14"></a>
<h3>Example 14: Consumable resources with task affinity and customized allocation and distribution</h3>
<p>A job requires 18 CPUs (18 tasks with no overcommitment). Run the job in the 
default partition. Allocate 6 CPUs on each node using block allocation within 
nodes. Use cyclic distribution of tasks to nodes and block distribution of 
tasks for CPU binding.
</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core,CR_CORE_DEFAULT_DIST_BLOCK
TaskPlugin=task/affinity
TaskPluginParam=sched
</PRE>
<p>Command line:</p>
<PRE>
srun -N3-3 -n18 -ntasks-per-node=6 -distribution cyclic:block --cpu_bind=cores ...
</PRE>
<p>Comments:</p>
<p>This example shows the use of task affinity with customized allocation of CPUs and 
distribution of tasks across nodes and within nodes for binding. The srun options 
specify the following conditions for the job: 18 tasks, 1 unique CPU per task, using 
all 3 nodes in the partition, with 6 tasks per node. 
The <FONT FACE="Courier New, monospace">CR_CORE_DEFAULT_DIST_BLOCK</FONT> 
configuration option specifies block allocation within nodes. To satisfy these 
conditions, SLURM allocates 6 CPUs on each node, with 4 CPUs allocated on one socket 
and 2 CPUs on the other socket. The <FONT FACE="Courier New, monospace">
--distribution cyclic:block</FONT> option specifies cyclic distribution of 
tasks to nodes and block distribution of tasks to CPUs within nodes for binding. 
The following table shows a possible pattern of allocation, distribution and binding 
for this job. For example, task id 10 is bound to CPU id 3 on node n1.
</p>
<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=1 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Allocated
				CPU ids</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2 3 4 5</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2 3 4 5</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2 3 4 5</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Tasks</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Distribution
				of Tasks to Nodes, by Task id</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0<BR>
                        3<BR>
                        6<BR>
                        9<BR>
                        12<BR>
                        15
                        </FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1<BR>
                        4<BR>
                        7<BR>
                        10<BR>
                        13<BR>
                        16
                        </FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2<BR>
                        5<BR>
                        8<BR>
                        11<BR>
                        14<BR>
                        17
                         </FONT></P>
			</TD>
		</TR>
		<TR>
			<TD ROWSPAN=2 WIDTH=15% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Binding of
				Tasks to CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=9% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>CPU id</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=9% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Task id</B></FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">6</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">9</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">12</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">15</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">4</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">7</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">10</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">13</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">16</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">5</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">8</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">11</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">14</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">17</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD WIDTH=3%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>
<BR>
<a name="Example15"></a>
<h3>Example 15: Consumable resources with task affinity to optimize the performance of a multi-task, 
multi-thread job</h3>
<p>A job requires 9 CPUs (3 tasks and 3 CPUs per task with no overcommitment). Run 
the job in the default partition, managing the CPUs to optimize the performance 
of the job.</p>
<p>slurm.conf options:</p>
<PRE>
SelectType=select/cons_res
SelectTypeParameters=CR_Core
TaskPlugin=task/affinity
TaskPluginParam=sched
</PRE>
<p>Command line:</p>
<PRE>
srun -N3-3 -n3 -c3 --cores-per-socket=3 --cpu_bind=cores ...
</PRE>
<p>Comments:</p>
<p>To optimize the performance of this job, the user wishes to allocate 3 CPUs from each of 
3 sockets and bind each task to the 3 CPUs in a single socket. The 
<FONT FACE="Courier New, monospace">TaskPlugin</FONT> 
<FONT FACE="Courier New, monospace">and TaskPluginParam</FONT> 
configuration options enable task affinity. The srun options specify the following 
conditions for the job: 3 tasks, with 3 unique CPUs per task, allocated on exactly 
3 nodes, with 3 CPUs per socket. To satisfy these conditions, SLURM allocates 3 CPUs 
from one socket in each of the 3 nodes in the default partition. The 
<FONT FACE="Courier New, monospace">--cpu_bind=cores</FONT> option causes SLURM to bind 
each task to the 3 allocated CPUs on the node to which it is distributed. The 
following table shows a possible pattern of allocation, distribution and binding 
for this job. For example, task id 2 is bound to CPU ids 0, 1 and 2 on socket id 0 of node n2.
</p>

<CENTER>
	<TABLE WIDTH=100% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=1 CELLSPACING=0 
        STYLE="page-break-inside: avoid; font-family: Arial, Helvetica, sans-serif;">
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Nodename</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n0</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n1</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>n2</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Socket id</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Allocated CPUs</B></FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">3</FONT></P>
			</TD>
			<TD COLSPAN=4 WIDTH=12%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Allocated
				CPU ids</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0 1 2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Number of
				Tasks</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD COLSPAN=2 WIDTH=28% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Distribution
				of Tasks to Nodes, by Task id</B></FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD COLSPAN=8 WIDTH=24%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
		</TR>
		<TR>
			<TD ROWSPAN=2 WIDTH=15% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Binding of
				Tasks to CPUs</B></FONT></P>
			</TD>
			<TD WIDTH=9% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>CPU id</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>0</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>1</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>2</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>3</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>4</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>5</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>6</B></FONT></P>
			</TD>
			<TD WIDTH=3% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>7</B></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=9% BGCOLOR="#e0e0e0">
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt"><B>Task id</B></FONT></P>
			</TD>
			<TD COLSPAN=3 WIDTH=9%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">0</FONT></P>
			</TD>
			<TD COLSPAN=5 WIDTH=15%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD COLSPAN=3 WIDTH=9%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">1</FONT></P>
			</TD>
			<TD COLSPAN=5 WIDTH=15%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">-</FONT></P>
			</TD>
			<TD COLSPAN=3 WIDTH=9%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">2</FONT></P>
			</TD>
			<TD COLSPAN=5 WIDTH=15%>
				<P ALIGN=CENTER><FONT SIZE=1 STYLE="font-size: 8pt">--</FONT></P>
			</TD>
		</TR>
	</TABLE>
</CENTER>

<p class="footer"><a href="#top">top</a></p>

<p style="text-align:center;">Last modified 30 March 2011</p>

<!--#include virtual="footer.txt"-->