#
# (c) Copyright 2015 Cray Inc.  All Rights Reserved.
#
# This file was generated by {{ script }} on {{ date }}.
#
# See the slurm.conf man page for more information.
#
ControlMachine={{ controlmachine }}
AuthType=auth/munge
CoreSpecPlugin=cray
CryptoType=crypto/munge
GresTypes={{ grestypes|join(',') }}
JobContainerType=job_container/cncu
JobSubmitPlugins=cray
KillOnBadExit=1
MpiParams=ports=20000-32767
ProctrackType=proctrack/cray
# Some programming models require unlimited virtual memory
PropagateResourceLimitsExcept=AS
# ReturnToService 2 will let rebooted nodes come back up immediately
ReturnToService=2
SlurmctldPidFile=/var/run/slurmctld.pid
SlurmdPidFile=/var/run/slurmd.pid
SlurmdSpoolDir=/var/spool/slurmd
SlurmUser=root
StateSaveLocation=/var/spool/slurm
SwitchType=switch/cray
TaskPlugin=task/cray,task/affinity,task/cgroup
#
#
# SCHEDULING
DefMemPerCPU={{ defmem }}
FastSchedule=0
MaxMemPerCPU={{ maxmem }}
SchedulerType=sched/backfill
SelectType=select/cray
SelectTypeParameters=CR_CORE_Memory,other_cons_res
#
#
# LOGGING AND ACCOUNTING
JobCompType=jobcomp/none
JobAcctGatherFrequency=30
JobAcctGatherType=jobacct_gather/linux
SlurmctldDebug=info
SlurmctldLogFile=/var/spool/slurm/slurmctld.log
SlurmdDebug=info
SlurmdLogFile=/var/spool/slurmd/%h.log
#
#
# POWER SAVE SUPPORT FOR IDLE NODES (optional)
CpuFreqDef=performance
#
#
# COMPUTE NODES
{% for node in nodes.values() %}NodeName={{ node.NodeName }} Sockets={{ node.Sockets }} CoresPerSocket={{ node.CoresPerSocket }} ThreadsPerCore={{ node.ThreadsPerCore }} Gres={{ node.Gres|join(',') }} # RealMemory={{ node.RealMemory }}
{% endfor %}#
#
# PARTITIONS
PartitionName=workq Nodes={{ nodelist }} Shared=EXCLUSIVE Priority=1 Default=YES DefaultTime=60 MaxTime=24:00:00 State=UP
